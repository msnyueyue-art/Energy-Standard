# 人员管理删除功能修复说明

## 问题描述
人员管理页面的删除按钮点击后没有反应,无法弹出删除确认对话框。

## 问题原因
在之前的国际化改造中,`deletePerson` 函数试图访问一个不存在的 DOM 元素 `deletePersonName`,导致 JavaScript 执行错误,从而阻止了删除确认对话框的显示。

### 错误代码 (personnel.html:1187)
```javascript
document.getElementById('deletePersonName').textContent = person.name;
```

### 实际 HTML 结构
```html
<div class="modal-body">
    <p id="deleteConfirmMessage"></p>
    <p style="color: #ef4444; font-size: 14px; margin-top: 8px;" data-translate="personnelDeleteWarning">此操作不可撤销!</p>
</div>
```

## 修复方案

### 1. 修正元素 ID 引用
将错误的 `deletePersonName` 改为正确的 `deleteConfirmMessage`

### 2. 添加国际化支持
使用翻译系统中已存在的翻译键 `personnelDeleteConfirm` 构建确认消息

### 3. 修复后的代码 (personnel.html:1181-1191)
```javascript
// 删除人员
function deletePerson(personId) {
    const person = personnelData.find(p => p.id === personId);
    if (!person) return;

    currentDeletePersonId = personId;
    const lang = localStorage.getItem('language') === 'en' ? 'en' : 'zh';
    const confirmMsg = translations[lang].personnelDeleteConfirm || '确定要删除人员';
    document.getElementById('deleteConfirmMessage').textContent = `${confirmMsg} "${person.name}" ?`;
    document.getElementById('deleteModal').classList.add('show');
}
```

## 涉及的翻译键

### 中文 (common.js)
```javascript
personnelDeleteTitle: '删除确认',
personnelDeleteConfirm: '确定要删除人员',
personnelDeleteWarning: '此操作不可撤销!',
personnelBtnConfirmDelete: '确定删除',
```

### 英文 (common.js)
```javascript
personnelDeleteTitle: 'Delete Confirmation',
personnelDeleteConfirm: 'Are you sure you want to delete personnel',
personnelDeleteWarning: 'This operation cannot be undone!',
personnelBtnConfirmDelete: 'Confirm Delete',
```

## 修复效果
- ✅ 删除按钮点击后正常弹出确认对话框
- ✅ 确认消息正确显示要删除的人员姓名
- ✅ 支持中英文国际化切换
- ✅ 警告信息正确显示

## 测试建议
1. 中文环境下点击删除按钮,验证弹窗和消息
2. 切换到英文环境,再次测试删除功能
3. 验证取消按钮和确定删除按钮都能正常工作
4. 确认删除后数据正确从表格中移除

## 修复日期
2026-01-14
