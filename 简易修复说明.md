# 电价配置弹框模板内容国际化 - 手动修复指南

## 修复内容总结

由于自动脚本遇到字符编码问题，请按以下步骤手动完成修复:

### 步骤1: 添加翻译键到 common.js

在 `common.js` 第 3262 行后（`elecPriceTierRangeAbove` 后面）添加:

```javascript
elecPriceUnitMonth: '月',
elecPriceUnitDegree: '度',
```

在英文部分对应位置添加:

```javascript
elecPriceUnitMonth: 'Month',
elecPriceUnitDegree: 'kWh',
```

### 步骤2: 替换 generatePriceHTML 函数

在 `electricity-price-new.html` 中，找到第 6052 行的 `function generatePriceHTML(template) {` 函数。

将整个函数替换为 `generatePriceHTML_fixed.js` 文件中的内容。

具体操作:
1. 打开 `electricity-price-new.html`
2. 找到 `// 生成价格配置HTML的辅助函数`
3. 选中从 `function generatePriceHTML(template) {` 到对应的结束 `}` (大约到第 6264 行)
4. 粘贴 `generatePriceHTML_fixed.js` 的全部内容

### 验证修复

修复完成后,打开浏览器:
1. 切换到英文环境 (localStorage.setItem('language', 'en'))
2. 进入"电价设置"页面
3. 点击"电站配置"标签
4. 点击某个站点的"Configure"按钮
5. 在弹框中:
   - 点击"Purchase Config"标签
   - 选择下拉框中的任一模板
   - 验证显示的内容是否为英文

### 预期效果

**固定电价模板:**
- 标题: "Fixed Price"
- 单位: "Electricity Price (Yuan/kWh)" (英文环境下)

**阶梯电价模板:**
- 标题: "Tier 1", "Tier 2", ...
- 范围: "0-200 kWh", "Above 400 kWh/month"
- 单位: "Electricity Price (Yuan/kWh)"

**月份标签:**
- "January", "February", ...

**季节名称:**
- "Summer", "Winter", "Spring and Autumn"

**时段名称(分时电价):**
- "Peak Period", "Valley Period", "Flat Period", "Sharp Peak Period"

## 文件清单

- `generatePriceHTML_fixed.js` - 修复后的完整函数
- `TEMPLATE_CONTENT_I18N_FIX_PLAN.md` - 详细修复方案文档
- 本文档 - 简易修复说明
