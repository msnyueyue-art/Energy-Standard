# 完整测试清单 - 数据页面国际化

## ⚠️ 测试前必须执行

**清除 localStorage (在浏览器控制台执行):**
```javascript
localStorage.removeItem('touchscreen_lang');
localStorage.removeItem('language');
localStorage.removeItem('touchscreen_language');
location.reload();
```

## 📋 完整测试流程

### 第一部分: 基础功能测试

#### ✅ 测试1: 默认英文环境
**步骤:**
1. 清除 localStorage
2. 直接打开 `data.html`
3. 观察页面初始状态

**期望结果:**
- [ ] 页面默认显示英文
- [ ] 左侧设备菜单显示: Overall, EMS, PCS, BMS, Meter, Temp, Fire Protection
- [ ] "Overall" 自动选中,右侧显示整机数据
- [ ] 标签页显示 "Real-time Data" (激活) 和 "Historical Data"
- [ ] "Custom" 按钮显示英文
- [ ] 右上角语言按钮显示 "EN" 激活

---

### 第二部分: 实时数据标签页测试

#### ✅ 测试2: 整机实时数据
**步骤:**
1. 在英文环境下,确保 "Overall" 设备和 "Real-time Data" 标签都已选中
2. 向下滚动查看所有章节

**期望结果 - 章节标题:**
- [ ] "Strategy Parameters" 章节
- [ ] "Core Operation Parameters" 章节
- [ ] "Operation Statistics" 章节
- [ ] "Other Parameters" 章节

**期望结果 - 策略调度参数:**
- [ ] "Current Strategy" 卡片
- [ ] "Dispatch Command" 卡片 - 值显示英文(如 "Max Power" 而非 "最大功率")
- [ ] "Target SOC" 卡片
- [ ] "Max Power" 卡片

**期望结果 - 运行统计:**
- [ ] "Today's Charge" 字段
- [ ] "Today's Discharge" 字段
- [ ] "Total Charge" 字段
- [ ] "Total Discharge" 字段

**期望结果 - 其他参数:**
- [ ] "Cycle Count" 字段 - 单位显示 "Times" 而非 "次"
- [ ] 寿命状态显示英文(如 "Lifespan Normal" 而非 "寿命正常")

**期望结果 - 设备状态:**
- [ ] 左侧设备状态显示 "Normal" / "Error" / "Offline" 而非中文

**期望结果 - 卡片值和状态:**
- [ ] 当前策略值显示英文(如 "Peak-Valley Arbitrage" 而非 "峰谷套利")
- [ ] 调度指令值显示英文(如 "Charging" 而非 "充电")
- [ ] 状态描述显示英文(如 "SOH Good" 而非 "SOH良好")
- [ ] 状态描述显示英文(如 "Temp Normal" 而非 "温度正常")

#### ✅ 测试3: 切换其他设备
**步骤:**
1. 依次点击: EMS → PCS → BMS → Meter → Temp → Fire Protection
2. 每个设备都检查标签页和字段标签

**期望结果:**
- [ ] EMS: 所有字段标签显示英文
- [ ] PCS: 所有字段标签显示英文
- [ ] BMS: 所有字段标签显示英文,包括 "Daily Charge", "Daily Discharge"
- [ ] Meter: 所有字段标签显示英文
- [ ] Temp: 所有字段标签显示英文
- [ ] Fire Protection: 所有字段标签显示英文

---

### 第三部分: 历史数据标签页测试 ⭐ 重点

#### ✅ 测试4: 功率与SOC综合分析图表
**步骤:**
1. 点击 "Overall" 设备
2. 点击 "Historical Data" 标签
3. 查看第一个图表

**期望结果:**
- [ ] 图表标题显示 "Power & SOC Analysis" 而非 "功率与SOC综合分析"
- [ ] 图表图例显示 "Power" 而非 "功率"
- [ ] 图表图例显示 "SOC"
- [ ] 图表正常渲染,数据显示正确

#### ✅ 测试5: 收益分析图表
**步骤:**
1. 在历史数据标签下向下滚动
2. 查看第二个图表

**期望结果:**
- [ ] 图表标题显示 "Revenue Analysis" 而非 "收益分析"
- [ ] 图表图例显示 "Charge (kWh)" 而非 "充电量 (kWh)"
- [ ] 图表图例显示 "Discharge (kWh)" 而非 "放电量 (kWh)"
- [ ] 图表图例显示 "Net Revenue (¥)" 而非 "净收益 (¥)"
- [ ] 时间周期下拉显示 "Day" (默认选中)、"Month"、"Year"、"Total"

#### ✅ 测试6: 切换时间周期
**步骤:**
1. 在收益分析图表中
2. 点击时间周期下拉框
3. 依次选择 "Month", "Year", "Total"

**期望结果:**
- [ ] 下拉选项都显示英文
- [ ] 图表数据根据选择更新
- [ ] 图表图例保持英文显示

---

### 第四部分: 字段设置对话框测试

#### ✅ 测试7: 打开字段设置
**步骤:**
1. 在任意设备的实时数据标签下
2. 点击右上角 "Custom" 按钮

**期望结果:**
- [ ] 对话框标题显示 "Field Settings" 而非 "数据显示设置"
- [ ] 对话框中的标签页按钮显示英文
- [ ] 字段列表正常显示
- [ ] 可以正常勾选/取消字段
- [ ] 关闭对话框后显示的字段正确更新

---

### 第五部分: 语言切换测试

#### ✅ 测试8: 切换到中文
**步骤:**
1. 在英文环境的数据页面
2. 点击右上角语言切换按钮
3. 选择 "中文"
4. 观察所有元素

**期望结果 - 立即生效:**
- [ ] 标签页立即变为 "实时数据"、"历史数据"
- [ ] "自定义" 按钮显示中文
- [ ] 左侧设备菜单变为中文: 整机、EMS、PCS、BMS、电表、温度、消防
- [ ] 所有章节标题变为中文
- [ ] 所有字段标签变为中文

**期望结果 - 历史数据图表:**
- [ ] 点击 "历史数据" 标签
- [ ] 图表标题变为 "功率与SOC综合分析"、"收益分析"
- [ ] 图表图例变为 "功率"、"充电量 (kWh)"、"放电量 (kWh)"、"净收益 (¥)"
- [ ] 时间周期下拉变为 "日"、"月"、"年"、"合计"

**期望结果 - 设备状态和卡片值:**
- [ ] 设备状态显示 "正常"、"异常"、"离线"
- [ ] 卡片值显示 "峰谷套利"、"充电中"等中文
- [ ] 状态描述显示 "SOH良好"、"温度正常"等中文

#### ✅ 测试9: 切换回英文
**步骤:**
1. 在中文环境下
2. 点击右上角语言切换按钮
3. 选择 "English"

**期望结果:**
- [ ] 所有元素立即切换回英文
- [ ] 数据保持显示,无需重新加载
- [ ] 历史数据图表的标题和图例也切换为英文

---

### 第六部分: 跨页面语言保持测试

#### ✅ 测试10: 从首页导航到数据页
**步骤:**
1. 打开首页 `home.html`
2. 确认首页显示英文
3. 点击 "Data" 导航到数据页面
4. 检查数据页面语言

**期望结果:**
- [ ] 数据页面保持英文环境
- [ ] 所有标签页和按钮显示英文
- [ ] 所有章节、字段、图表都显示英文
- [ ] 设备状态和卡片值都显示英文

#### ✅ 测试11: 中文环境跨页面
**步骤:**
1. 在首页切换到中文
2. 导航到数据页面
3. 检查数据页面语言

**期望结果:**
- [ ] 数据页面保持中文环境
- [ ] 所有元素都显示中文

---

### 第七部分: 页面刷新测试

#### ✅ 测试12: 英文环境刷新
**步骤:**
1. 在英文环境的数据页面
2. 按 F5 刷新页面

**期望结果:**
- [ ] 页面仍显示英文
- [ ] 所有元素保持英文
- [ ] 整机数据自动显示
- [ ] 历史数据图表也保持英文

#### ✅ 测试13: 中文环境刷新
**步骤:**
1. 在中文环境的数据页面
2. 按 F5 刷新页面

**期望结果:**
- [ ] 页面仍显示中文
- [ ] 所有元素保持中文

---

### 第八部分: 边界情况测试

#### ✅ 测试14: 快速切换语言
**步骤:**
1. 快速连续点击语言切换按钮 5 次(英文→中文→英文→中文→英文)
2. 检查页面状态

**期望结果:**
- [ ] 页面正常响应,无卡顿
- [ ] 最终显示英文
- [ ] 所有元素一致显示英文,无混合语言
- [ ] 浏览器控制台无 JavaScript 错误

#### ✅ 测试15: 切换语言后切换设备
**步骤:**
1. 在英文环境下切换到中文
2. 依次点击不同设备: EMS → PCS → BMS
3. 切换回英文
4. 再次点击不同设备

**期望结果:**
- [ ] 每次设备切换后,字段标签都正确显示当前语言
- [ ] 设备状态始终与当前语言一致
- [ ] 无混合语言显示

#### ✅ 测试16: 历史数据中切换语言
**步骤:**
1. 在英文环境下
2. 打开历史数据标签
3. 切换到中文
4. 切换回英文

**期望结果:**
- [ ] 图表标题实时更新
- [ ] 图表图例实时更新
- [ ] 时间周期下拉选项实时更新
- [ ] 图表数据保持正确显示

---

## 🎯 完整性检查清单

完成所有测试后,确认以下功能:

### 核心功能
- [ ] ✅ 默认英文环境正常
- [ ] ✅ 整机数据立即显示
- [ ] ✅ 所有交互功能正常(点击、切换、滚动)

### 静态元素国际化
- [ ] ✅ 所有标签页按钮支持国际化
- [ ] ✅ 所有按钮(自定义)支持国际化
- [ ] ✅ 所有章节标题支持国际化
- [ ] ✅ 所有字段标签支持国际化
- [ ] ✅ 左侧设备菜单支持国际化

### 动态内容国际化
- [ ] ✅ 设备状态(正常/异常/离线)支持国际化
- [ ] ✅ 卡片值(峰谷套利、充电中等)支持国际化
- [ ] ✅ 状态描述(SOH良好、温度正常等)支持国际化
- [ ] ✅ 单位(次)支持国际化

### 图表国际化
- [ ] ✅ 图表标题(功率与SOC综合分析、收益分析)支持国际化
- [ ] ✅ 图表图例(功率、充电量、放电量、净收益)支持国际化
- [ ] ✅ 时间周期下拉(日、月、年、合计)支持国际化

### 对话框国际化
- [ ] ✅ 字段设置对话框标题支持国际化
- [ ] ✅ 对话框内容正常显示

### 语言保持
- [ ] ✅ 语言切换实时生效
- [ ] ✅ 跨页面语言保持
- [ ] ✅ 刷新后语言保持
- [ ] ✅ 所有页面元素语言一致,无混合显示

---

## 🐛 如果发现问题

请记录以下信息:

### 1. 问题描述
- 哪个元素仍显示中文/英文不正确?
- 在什么操作后出现的?
- 是否可以稳定复现?

### 2. 截图信息
- 请截图并用红框标记问题元素
- 同时截图浏览器控制台(F12 → Console)

### 3. 环境信息
- 当前语言设置: (在控制台执行 `localStorage.getItem('touchscreen_language')`)
- 浏览器类型和版本
- 是否有 JavaScript 错误?

### 4. 操作步骤
- 详细描述复现步骤
- 从哪个页面开始?
- 进行了哪些操作?

---

## 📚 相关文档

1. [重要-请先阅读.md](重要-请先阅读.md) - 完整修复历史和概览
2. [localStorage键名冲突修复说明.md](localStorage键名冲突修复说明.md) - localStorage 统一
3. [数据不显示问题修复说明.md](数据不显示问题修复说明.md) - 数据加载修复
4. [交互功能修复完成.md](交互功能修复完成.md) - 交互功能恢复
5. [数据页面完整国际化修复说明.md](数据页面完整国际化修复说明.md) - 静态HTML国际化
6. [数据页面动态内容国际化修复.md](数据页面动态内容国际化修复.md) - 动态内容国际化
7. [历史数据图表国际化修复完成.md](历史数据图表国际化修复完成.md) - 图表国际化

---

## ✅ 测试完成确认

如果所有测试项都通过,说明数据页面的国际化功能已完整实现! 🎉

**主要成就:**
- ✅ 完整的双语支持(英文/中文)
- ✅ 实时语言切换
- ✅ 跨页面语言保持
- ✅ 所有静态和动态内容都支持国际化
- ✅ 图表完整国际化
- ✅ 用户体验流畅,无卡顿

现在可以放心使用数据页面的所有功能了!
