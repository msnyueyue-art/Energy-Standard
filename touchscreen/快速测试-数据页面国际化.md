# 快速测试 - 数据页面国际化

## ⚠️ 测试前必须执行

**清除 localStorage (在浏览器控制台执行):**
```javascript
localStorage.removeItem('touchscreen_lang');
localStorage.removeItem('language');
localStorage.removeItem('touchscreen_language');
location.reload();
```

## 测试清单

### ✅ 测试1: 默认英文环境

**步骤:**
1. 清除 localStorage
2. 直接打开 data.html

**期望结果:**
- [ ] 页面默认显示英文
- [ ] 左侧设备菜单显示英文(Overall, EMS, PCS, BMS, Meter, Temp, Fire Protection)
- [ ] 标签页按钮显示 "Real-time Data" 和 "Historical Data"
- [ ] "Custom" 按钮显示英文
- [ ] 整机数据立即显示

### ✅ 测试2: 章节标题和字段标签

**步骤:**
1. 在英文环境下查看整机页面
2. 向下滚动查看所有章节

**期望结果:**
- [ ] "Strategy Parameters" 章节标题
- [ ] "Core Operation Parameters" 章节标题
- [ ] "Operation Statistics" 章节标题显示英文
- [ ] "Today's Charge" 字段标签
- [ ] "Today's Discharge" 字段标签
- [ ] "Total Charge" 字段标签
- [ ] "Total Discharge" 字段标签
- [ ] "Other Parameters" 章节标题
- [ ] "Cycle Count" 字段标签

### ✅ 测试3: 切换到中文

**步骤:**
1. 在英文环境的数据页面
2. 点击右上角语言切换按钮
3. 选择"中文"

**期望结果:**
- [ ] 标签页立即变为"实时数据"、"历史数据"
- [ ] "自定义"按钮显示中文
- [ ] 所有章节标题变为中文
- [ ] 所有字段标签变为中文
- [ ] 数据保持显示,无需重新加载

### ✅ 测试4: 切换设备

**步骤:**
1. 在英文环境下
2. 依次点击左侧设备: EMS, PCS, BMS, Meter, Temp, Fire Protection

**期望结果:**
每个设备页面:
- [ ] 标签页按钮都显示英文
- [ ] 章节标题都显示英文
- [ ] 字段标签都显示英文
- [ ] "Custom" 按钮显示英文

### ✅ 测试5: 历史数据标签

**步骤:**
1. 在整机页面(英文环境)
2. 点击 "Historical Data" 标签

**期望结果:**
- [ ] 标签页切换成功
- [ ] 历史数据图表显示
- [ ] 图表标题显示英文

### ✅ 测试6: 自定义按钮

**步骤:**
1. 在整机页面(英文环境)
2. 点击右上角 "Custom" 按钮

**期望结果:**
- [ ] 弹出字段设置对话框
- [ ] 对话框中的标签页显示英文
- [ ] 字段列表显示正确

### ✅ 测试7: 跨页面语言保持

**步骤:**
1. 在首页切换到英文
2. 点击 "Data" 导航到数据页面
3. 检查所有元素

**期望结果:**
- [ ] 数据页面保持英文环境
- [ ] 所有标签页和按钮显示英文
- [ ] 所有章节和字段显示英文

### ✅ 测试8: 刷新页面

**步骤:**
1. 在英文环境的数据页面
2. 按 F5 刷新页面

**期望结果:**
- [ ] 页面仍显示英文
- [ ] 所有元素保持英文
- [ ] 数据正常显示

### ✅ 测试9: 中文环境完整测试

**步骤:**
1. 切换到中文
2. 重复测试2-6的步骤

**期望结果:**
- [ ] 所有元素都显示中文
- [ ] 标签页、按钮、章节、字段都是中文
- [ ] 功能正常工作

## 常见问题

### Q1: 页面仍显示中文怎么办?

**A:** 清除 localStorage 并刷新:
```javascript
localStorage.clear();
location.reload();
```

### Q2: 部分字段仍显示中文?

**A:** 检查是否有新添加的字段缺少翻译。查看 `translateLabel` 函数中的 `labelTranslations` 对象。

### Q3: 语言切换后不生效?

**A:**
1. 检查浏览器控制台是否有 JavaScript 错误
2. 确认 touchscreen-i18n.js 已正确加载
3. 确认 common-header-scripts.js 已正确加载

## 测试完成确认

完成所有测试后,确认以下功能:

- [ ] ✅ 默认英文环境正常
- [ ] ✅ 所有标签页按钮支持国际化
- [ ] ✅ 所有章节标题支持国际化
- [ ] ✅ 所有字段标签支持国际化
- [ ] ✅ 语言切换实时生效
- [ ] ✅ 跨页面语言保持
- [ ] ✅ 刷新后语言保持
- [ ] ✅ 所有交互功能正常
- [ ] ✅ 中文环境完全正常

## 如果发现问题

请提供以下信息:
1. 具体哪个元素仍显示中文
2. 截图(最好用红框标记)
3. 浏览器控制台是否有错误
4. 当前语言设置(检查 localStorage.getItem('touchscreen_language'))

## 相关文档

- [数据页面完整国际化修复说明.md](数据页面完整国际化修复说明.md) - 技术实现细节
- [重要-请先阅读.md](重要-请先阅读.md) - 完整修复历史
