# 快速测试清单 - 控制页面国际化

## 测试步骤

### 1. 打开页面
访问: `touchscreen-display.html` → 登录 → 点击导航栏 "Control"

### 2. 测试英文环境 🇺🇸

✅ 点击右上角语言切换按钮(🌐)
✅ 选择 "🇺🇸 English"

#### 检查运行模式控制区块
- 标题: `Operation Mode Control`
- 模式选项: `Auto Mode` / `Manual Mode`
- 手动按钮: `Charging` / `Discharging`
- 说明文字: `System automatically controls...`
- 时间轴标题: `Peak-Valley Electricity Price Period`
- 图例: `Peak Period` / `Valley Period` / `Normal Period`

#### 检查电池参数设置区块
- 标题: `Battery Parameter Settings`
- 参数标签:
  - `Charge Stop SOC` / `Charge Power`
  - `Discharge Stop SOC` / `Discharge Power`
- 控制选项:
  - `Balance Control`: `Active Balance` / `Passive Balance`
  - `Fan Control`: `Auto` / `On` / `Off`
  - `Temperature Protection`: `On` / `Off`

#### 检查消防控制区块
- 标题: `Fire Control`
- 灭火启动: `Auto Start` / `Manual Start` / `Disabled`
- 灭火剂类型:
  - `Perfluorohexanone`
  - `Heptafluoropropane`
  - `IG541 Mixed Gas`
  - `Carbon Dioxide`
- 声光报警: `Enabled` / `Disabled` / `Test Mode`
- 通风控制: `Auto Control` / `Force On` / `Force Off`
- 紧急断电: `Auto` / `Manual` / `Disabled`

#### 检查按钮文本
- 编辑按钮: `Edit`
- 点击编辑后:
  - 保存按钮: `Save`
  - 取消按钮: `Cancel`

### 3. 测试中文环境 🇨🇳

✅ 切换回 "🇨🇳 中文"

#### 检查运行模式控制区块
- 标题: `运行模式控制`
- 模式选项: `自动模式` / `手动模式`
- 手动按钮: `充电` / `放电`
- 说明文字: `系统根据下方时间轴自动控制充放电`
- 时间轴标题: `峰谷电价时段`
- 图例: `峰值时段` / `谷值时段` / `平价时段`

#### 检查电池参数设置区块
- 标题: `电池参数设置`
- 参数标签:
  - `充电停止SOC` / `充电功率`
  - `放电停止SOC` / `放电功率`
- 控制选项:
  - `均衡控制`: `主动均衡` / `被动均衡`
  - `风扇控制`: `自动` / `开启` / `关闭`
  - `温度保护`: `开启` / `关闭`

#### 检查消防控制区块
- 标题: `消防控制`
- 灭火启动: `自动启动` / `手动启动` / `禁用`
- 灭火剂类型:
  - `全氟己酮`
  - `七氟丙烷`
  - `IG541混合气体`
  - `二氧化碳`
- 声光报警: `启用` / `禁用` / `测试模式`
- 通风控制: `自动控制` / `强制开启` / `强制关闭`
- 紧急断电: `自动` / `手动` / `禁用`

#### 检查按钮文本
- 编辑按钮: `编辑`
- 点击编辑后:
  - 保存按钮: `保存`
  - 取消按钮: `取消`

### 4. 测试多次切换
✅ 中文 ↔️ 英文 切换 3-5 次
✅ 确认每次切换后所有文本都能正确更新
✅ 确认编辑模式下的按钮也能正确翻译
✅ 确认页面功能正常,无JavaScript错误

## 预期结果对比表

| 位置 | 中文 | 英文 |
|------|------|------|
| 页面标题 | 设备控制 | Device Control |
| 运行模式控制 | 运行模式控制 | Operation Mode Control |
| 自动模式 | 自动模式 | Auto Mode |
| 手动模式 | 手动模式 | Manual Mode |
| 充电 | 充电 | Charging |
| 放电 | 放电 | Discharging |
| 电池参数设置 | 电池参数设置 | Battery Parameter Settings |
| 充电停止SOC | 充电停止SOC | Charge Stop SOC |
| 充电功率 | 充电功率 | Charge Power |
| 放电停止SOC | 放电停止SOC | Discharge Stop SOC |
| 放电功率 | 放电功率 | Discharge Power |
| 均衡控制 | 均衡控制 | Balance Control |
| 主动均衡 | 主动均衡 | Active Balance |
| 被动均衡 | 被动均衡 | Passive Balance |
| 风扇控制 | 风扇控制 | Fan Control |
| 消防控制 | 消防控制 | Fire Control |
| 灭火启动 | 灭火启动 | Fire Extinguisher Start |
| 自动启动 | 自动启动 | Auto Start |
| 手动启动 | 手动启动 | Manual Start |
| 灭火剂类型 | 灭火剂类型 | Extinguisher Type |
| 全氟己酮 | 全氟己酮 | Perfluorohexanone |
| 七氟丙烷 | 七氟丙烷 | Heptafluoropropane |
| 声光报警 | 声光报警 | Audio-Visual Alarm |
| 通风控制 | 通风控制 | Ventilation Control |
| 紧急断电 | 紧急断电 | Emergency Power Off |
| 编辑 | 编辑 | Edit |
| 保存 | 保存 | Save |
| 取消 | 取消 | Cancel |

## 常见问题

**Q: 切换语言后某些文本没有更新?**
A: 刷新页面(F5)后重试,确保JavaScript正确加载

**Q: 编辑模式下的按钮显示中文?**
A: 点击编辑按钮后再切换语言,确认按钮能正确翻译

**Q: 看到中英文混合显示?**
A: 清除浏览器缓存(Ctrl+Shift+Delete),重新访问页面

**Q: 控制台出现错误?**
A: 检查touchscreen-i18n.js是否正确加载,查看网络请求

## 测试通过标准

- ✅ 所有文本在英文环境下显示英文
- ✅ 所有文本在中文环境下显示中文
- ✅ 语言切换实时生效,无需刷新页面
- ✅ 多次切换语言不会出现异常
- ✅ 编辑模式的按钮也能正确翻译
- ✅ 页面控制功能正常工作
- ✅ 控制台无JavaScript错误

## 补充说明

### 修复范围
- ✅ 页面标题和编辑按钮
- ✅ 运行模式控制完整区块
- ✅ 时间轴和电价时段图例
- ✅ 电池参数设置完整区块
- ✅ 消防控制完整区块
- ✅ 所有按钮和标签

### HTML默认语言
修改后的control.html默认显示英文,系统会根据localStorage中保存的语言设置:
- 如果语言是`zh`,自动翻译为中文
- 如果语言是`en`,保持英文不变

---
**修复完成日期**: 2026-01-12
**修复文件**: `touchscreen/control.html`, `touchscreen/touchscreen-i18n.js`
**相关文档**: `CONTROL_I18N_FIX_COMPLETE.md`
