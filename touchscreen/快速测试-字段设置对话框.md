# 快速测试 - 字段设置对话框国际化

## ⚠️ 测试前必须执行

**清除 localStorage (在浏览器控制台执行):**
```javascript
localStorage.removeItem('touchscreen_lang');
localStorage.removeItem('language');
localStorage.removeItem('touchscreen_language');
location.reload();
```

## 📋 快速测试清单

### ✅ 测试1: 英文环境 - 整机实时数据

**步骤:**
1. 清除 localStorage
2. 打开 data.html (默认英文)
3. 点击 "Overall" 设备
4. 确保 "Real-time Data" 标签激活
5. 点击右上角 "Custom" 按钮

**期望结果:**
- [ ] 对话框标题显示 "Field Settings"
- [ ] 标签页按钮显示 "Real-time Data" (激活)、"Historical Data"
- [ ] 章节标题显示:
  - "Strategy Parameters"
  - "Core Operation Parameters"
  - "Operation Statistics"
  - "Other Parameters"
- [ ] 字段标签显示英文:
  - Current Strategy
  - Dispatch Command
  - Target SOC
  - Max Power
  - SOC, SOH
  - Temperature
  - Charge/Discharge Power
  - Battery Current
  - Battery Voltage
  - Today's Charge
  - Today's Discharge
  - Total Charge
  - Total Discharge
  - Cycle Count

### ✅ 测试2: 英文环境 - 整机历史数据

**步骤:**
1. 在字段设置对话框中
2. 点击 "Historical Data" 标签

**期望结果:**
- [ ] 标签页切换成功
- [ ] 章节标题显示 "Chart Analysis"
- [ ] 字段标签显示:
  - Power & SOC Analysis
  - Revenue Analysis

### ✅ 测试3: 英文环境 - EMS设备

**步骤:**
1. 关闭对话框
2. 点击左侧 "EMS" 设备
3. 点击右上角 "Custom" 按钮

**期望结果:**
- [ ] 对话框标题显示 "Field Settings"
- [ ] 章节标题显示英文:
  - CPU Status
  - Memory Status
  - Disk Status
  - Board Temperature
  - 4G Network Status
  - WiFi Status
  - System Information
- [ ] 字段标签显示英文:
  - Usage (CPU/内存)
  - Temperature
  - Occupancy
  - Disk Usage
  - Current Temp
  - Signal Strength
  - SIM Status
  - Network Interface
  - System Uptime
  - Current System Time
  - Current Hardware Time

### ✅ 测试4: EMS历史数据

**步骤:**
1. 在EMS字段设置对话框中
2. 点击 "Historical Data" 标签

**期望结果:**
- [ ] 章节标题显示英文:
  - Performance Monitoring
  - Network Status
  - System Logs
- [ ] 字段标签显示英文:
  - CPU Usage History
  - Memory Usage History
  - Temperature Trend
  - Network Connection History
  - Signal Strength Changes
  - System Operation Log
  - Important Events Record

### ✅ 测试5: 对话框打开时切换语言 ⭐ 重点

**步骤:**
1. 在英文环境下打开字段设置对话框(任意设备)
2. 保持对话框打开状态
3. 点击右上角语言切换按钮
4. 选择 "中文"

**期望结果:**
- [ ] 对话框标题立即变为 "数据显示设置"
- [ ] 标签页按钮立即变为 "实时数据"、"历史数据"
- [ ] 所有章节标题立即变为中文
- [ ] 所有字段标签立即变为中文
- [ ] 切换流畅,无需重新打开对话框

### ✅ 测试6: 中文环境打开对话框

**步骤:**
1. 在中文环境下
2. 点击 "整机" → "实时数据"
3. 点击 "自定义" 按钮

**期望结果:**
- [ ] 对话框标题显示 "数据显示设置"
- [ ] 标签页显示 "实时数据"、"历史数据"
- [ ] 所有章节标题显示中文
- [ ] 所有字段标签显示中文

### ✅ 测试7: 切换回英文

**步骤:**
1. 在中文环境的对话框中
2. 点击右上角语言切换按钮
3. 选择 "English"

**期望结果:**
- [ ] 对话框内容立即切换回英文
- [ ] 所有元素正确显示英文

### ✅ 测试8: 字段开关功能

**步骤:**
1. 在任意环境下打开对话框
2. 点击某些字段的开关按钮
3. 关闭对话框
4. 检查数据页面显示的字段

**期望结果:**
- [ ] 开关状态正确保存
- [ ] 关闭的字段不显示在数据页面
- [ ] 打开的字段正常显示
- [ ] 重新打开对话框,开关状态保持

### ✅ 测试9: 跨设备切换

**步骤:**
1. 在英文环境下
2. 依次打开不同设备的字段设置对话框: Overall → EMS → PCS → BMS
3. 检查每个设备的对话框内容

**期望结果:**
- [ ] 每个设备的章节标题都正确显示英文
- [ ] 每个设备的字段标签都正确显示英文
- [ ] 不同设备的字段配置正确分离

### ✅ 测试10: 页面刷新后打开对话框

**步骤:**
1. 在英文环境下
2. 按 F5 刷新页面
3. 打开字段设置对话框

**期望结果:**
- [ ] 页面刷新后仍保持英文
- [ ] 对话框所有内容显示英文
- [ ] 之前的字段开关状态保持

## 🎯 完整性检查

完成所有测试后,确认:

- [ ] ✅ 英文环境对话框完整国际化
- [ ] ✅ 中文环境对话框正常显示
- [ ] ✅ 对话框打开时实时语言切换
- [ ] ✅ 所有设备的对话框都正确国际化
- [ ] ✅ 字段开关功能正常工作
- [ ] ✅ 刷新后语言和设置保持
- [ ] ✅ 无混合语言显示
- [ ] ✅ 无JavaScript错误

## 🐛 如果发现问题

请记录:
1. 哪个元素仍显示中文?
2. 在哪个设备的对话框中?
3. 实时数据还是历史数据标签页?
4. 浏览器控制台是否有错误?
5. 截图并标记问题元素

## 📚 相关文档

- [字段设置对话框国际化修复.md](字段设置对话框国际化修复.md) - 完整技术说明
- [重要-请先阅读.md](重要-请先阅读.md) - 修复历史概览
- [完整测试清单-数据页面国际化.md](完整测试清单-数据页面国际化.md) - 全面测试指南

## ✅ 测试完成!

如果所有测试都通过,说明字段设置对话框已完整支持国际化! 🎉
